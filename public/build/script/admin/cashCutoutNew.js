let pValidator;function cashCutoutNewList(t,e){window.location.href=URL_PATH+"/admin/"+e}function cashCutoutSubmit(e){if(pValidator.validate()){let t={};t.totalCount=e.cashCutoutTotalCount.value,t.totalCalc=e.cashCutoutTotalCalc.value,t.totalDiff=e.cashCutoutTotalDiff.value,t.totalOut=e.cashCutoutTotalOut.value,t.currencyId=e.cashCutoutCurrencyId.value,t.comment=e.cashCutoutComment.value;const a=t.id&&!["","0"].includes(t.id.toString());SnModal.confirm({title:"¿Está seguro de realizar el corte de caja?",content:"Esta operación es irreversible",okText:"Si",okClassNames:"success",cancelText:"No",onOk(){SnLoadingState(!0,"jsAction","cashCutoutFormSubmit"),RequestApi.fetch("/admin/processCashCutout/"+(a?"update":"create"),{method:"POST",body:t}).then(t=>{t.success?(SnMessage.success({content:t.message}),dynamicClearForm(pValidator,"cashCutoutForm","cashCutoutMethodCount_1"),window.location.href=URL_PATH+"/admin/processCashCutout"):dynamicResponseErrorModalMessage(t)}).finally(t=>{SnLoadingState(!1,"jsAction","cashCutoutFormSubmit")})}})}else dynamicFormSubmitInvalidMessage()}function cashCutoutListeners(){[...document.getElementById("cashCutoutMethodTableBody").children].map((t,e)=>{var t=t.dataset.id,a=document.getElementById("cashCutoutMethodCount_"+t),t=document.getElementById("cashCutoutMethodOut_"+t);a.addEventListener("input",t=>{t.preventDefault(),cashCutoutCalculate(!0)}),t.addEventListener("input",t=>{t.preventDefault(!0),cashCutoutCalculate(!1)})})}function cashCutoutCalculate(c=!0){var t=document.getElementById("cashCutoutMethodTableBody");let l=0,s=0,d=0,r=0;[...t.children].map((t,e)=>{var t=t.dataset.id,a=document.getElementById("cashCutoutMethodCount_"+t),u=document.getElementById("cashCutoutMethodCalc_"+t),o=document.getElementById("cashCutoutMethodDiff_"+t),t=document.getElementById("cashCutoutMethodOut_"+t),a=parseFloat(a.value),u=parseFloat(u.value),n=a-u;o.value=n,o.style.color=0<=n?"var(--green-6)":"var(--red-6)",c&&(t.value=a),l+=a,s+=u,d+=n,r+=parseFloat(t.value)}),document.getElementById("cashCutoutTotalCount").value=l,document.getElementById("cashCutoutTotalCalc").value=s,document.getElementById("cashCutoutTotalDiff").value=d,document.getElementById("cashCutoutTotalOut").value=r}function cashCutoutCurrencyIdChange(){var t=document.getElementById("cashCutoutCurrencyId").value,e=new URL(location.href);e.searchParams.set("currencyId",t),location.href=e.href}document.addEventListener("DOMContentLoaded",()=>{pValidator=dynamicLoadFormValidate(pValidator,"cashCutoutForm");const e=document.getElementById("cashCutoutForm");e.addEventListener("submit",t=>{t.preventDefault(),cashCutoutSubmit(e)}),cashCutoutListeners(),cashCutoutCalculate()});