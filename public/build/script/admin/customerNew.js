let pValidator;function customerNewList(e,t){window.location.href=URL_PATH+"/admin/"+t}function customerSubmit(e){if(pValidator.validate()){SnLoadingState(!0,"jsAction","customerFormSubmit");var t={};t.id=e.customerId.value||0,t.documentNumber=e.customerDocumentNumber.value,t.socialReason=e.customerSocialReason.value,t.commercialReason=e.customerCommercialReason.value,t.fiscalAddress=e.customerFiscalAddress.value,t.email=e.customerEmail.value,t.telephone=e.customerTelephone.value,t.identityDocumentId=e.customerIdentityDocumentId.value,t.isDefault=e.customerIsDefault.checked?1:0;const n=t.id&&!["","0"].includes(t.id.toString());RequestApi.fetch("/admin/maintenanceCustomer/"+(n?"update":"create"),{method:"POST",body:t}).then(e=>{e.success?dynamicResponseSuccess(n,e.message,()=>{n?window.location.href=URL_PATH+"/admin/maintenanceCustomer/edit/"+e.result.id:dynamicClearForm(pValidator,"customerForm","customerIdentityDocumentId")},()=>window.location.href=URL_PATH+"/admin/maintenanceCustomer"):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction","customerFormSubmit")})}else dynamicFormSubmitInvalidMessage()}function getIdentityDocumentNumber(e,t){t.classList.add("loading"),RequestApi.fetch("/page/queryDocument",{method:"POST",body:{documentNumber:e}}).then(e=>{var t,n;e.success?(t=e.result,document.getElementById("customerDocumentNumber").value=t.document_number,document.getElementById("customerIdentityDocumentId").value=t.document_type_id,document.getElementById("customerFiscalAddress").value=t.full_address,(n=document.getElementById("customerDomicileCondition")).innerHTML=t.domicile_condition,"HABIDO"===t.domicile_condition?n.style.color="var(--green-6)":n.style.color="var(--red-6)",1==t.document_type_id?document.getElementById("customerSocialReason").value=`${t.full_name} ${t.father_last_name} `+t.mother_last_name:3==t.document_type_id&&(document.getElementById("customerSocialReason").value=t.full_name)):SnModal.danger({title:"Algo saliÃ³ mal",content:e.message})}).finally(e=>{t.classList.remove("loading")})}document.addEventListener("DOMContentLoaded",()=>{pValidator=dynamicLoadFormValidate(pValidator,"customerForm");const t=document.getElementById("customerForm"),n=(t.addEventListener("submit",e=>{e.preventDefault(),customerSubmit(t)}),document.getElementById("customerDocumentNumber"));n.addEventListener("keypress",function(e){"Enter"===e.key&&e.preventDefault()}),n.addEventListener("keyup",function(e){"Enter"===e.key&&(e.preventDefault(),getIdentityDocumentNumber(e.target.value,n))}),dynamicViewKeyboardListeners(screenName,appMenuActions)});