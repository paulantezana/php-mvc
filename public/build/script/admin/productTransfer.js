function productTransferViewItems(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processProductTransfer/items",{method:"POST",body:{id:e}}).then(e=>{if(e.success){let t=document.getElementById("productTransferItemTableBody");t.innerHTML="",e.result.forEach(e=>{t.insertAdjacentHTML("beforeend",`<tr>
                                                                    <td>${e.quantity}</td>
                                                                    <td>${e.product_id_barcode}</td>
                                                                    <td>${e.product_id_description}</td>
                                                                    <td></td>
                                                                    <td>${e.sale_price_1}</td>
                                                                    <td>${e.total_price}</td>
                                                                </tr>`)}),SnModal.open("productTransferItemModal")}else dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}function productTransferCancel(t){SnModal.confirm({title:`¿Estás seguro de anular esta transferencia de productos: ${t}?`,okText:"Si",okClassNames:"danger",cancelText:"No",onOk(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processProductTransfer/cancel",{method:"POST",body:{id:t,message:e}}).then(e=>{e.success?(SnMessage.success({content:e.message}),maintenanceTable.getData()):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}})}function productTransferPassed(t){SnModal.confirm({title:`¿Estás seguro de aprobar esta transferencia de productos: ${t}?`,content:"Este proceso es irreversible",okText:"Si",okClassNames:"success",cancelText:"No",onOk(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processProductTransfer/passed",{method:"POST",body:{id:t,message:e}}).then(e=>{e.success?(SnMessage.success({content:e.message}),maintenanceTable.getData()):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}})}function productTransferReject(t){SnModal.confirm({title:`¿Esta seguro de rechazar esta transferencia de productos: ${t}?`,content:"Este proceso es irreversible",okText:"Si",okClassNames:"danger",cancelText:"No",onOk(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processProductTransfer/reject",{method:"POST",body:{id:t,message:e}}).then(e=>{e.success?(SnMessage.success({content:e.message}),maintenanceTable.getData()):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}})}function productTransferPrint(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processProductTransfer/reportPrint",{method:"POST",body:{id:e}}).then(e=>{e.success?iframePrintModal(e.result.pdf_path):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}document.addEventListener("DOMContentLoaded",()=>{maintenanceTable=new SnTable({elementId:"drawProductTransferTable",entity:"productTransfer",data:e=>snTableFetchData("/admin/processProductTransfer/table",e),actions:appMenuActions,selectable:!1,columns:[{title:"Fecha solicitud",field:"request_date",type:"date",filterable:!0,sortable:!0},{title:"Usuario solicitud",field:"request_user_id_user_name",filterable:!0,sortable:!0},{title:"Number",field:"number",filterable:!0,sortable:!0},{title:"Origen",field:"origin_ware_house_id_commercial_reason",filterable:!0,sortable:!0},{title:"Destino",field:"destination_ware_house_id_commercial_reason",filterable:!0,sortable:!0},{title:"Descripcion",field:"reason",filterable:!0,sortable:!0},{title:"Estado",field:"product_transfer_state_id_description",filterable:!0,sortable:!0,customRender:(e,t)=>{switch(e.product_transfer_state_id){case"REQUEST":return`<span class="SnTag">${e.product_transfer_state_id_description}</span>`;case"PASSED":return`<span class="SnTag success">${e.product_transfer_state_id_description}</span>`;case"REJECT":return`<span class="SnTag danger">${e.product_transfer_state_id_description}</span>`;case"CANCEL":return`<span class="SnTag warning">${e.product_transfer_state_id_description}</span>`;default:return`<span class="SnTag">${e.product_transfer_state_id_description}</span>`}}},{title:"",field:"-",filterable:!1,sortable:!1,customRender:(e,t)=>{var s="REQUEST"===e.product_transfer_state_id&&e.origin_ware_house_id==t.result.wareHouseId?"":"disabled",a="REQUEST"===e.product_transfer_state_id&&e.destination_ware_house_id==t.result.wareHouseId?"":"disabled",t="REQUEST"===e.product_transfer_state_id&&e.destination_ware_house_id==t.result.wareHouseId?"":"disabled";return`<div class="SnTable-action">
                        <button class="SnBtn icon radio sm jsAction" title="Anular" onclick="productTransferViewItems(${e.id})"><i class="fas fa-list-ul"></i></button>
                        <button class="SnBtn icon radio sm jsAction ${s}" title="Anular" onclick="productTransferCancel(${e.id})" ${s}><i class="fas fa-ban"></i></button>
                        <button class="SnBtn icon radio sm jsAction ${a}" title="Aprobar" onclick="productTransferPassed(${e.id})" ${a}><i class="fas fa-check"></i></button>
                        <button class="SnBtn icon radio sm jsAction ${t}" title="Rechazar" onclick="productTransferReject(${e.id})" ${t}><i class="fas fa-minus"></i></button>
                    </div>`}}],filters:[...getUrlFilter()]})});