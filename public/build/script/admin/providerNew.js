let pValidator;function providerNewList(e,t){window.location.href=URL_PATH+"/admin/"+t}function providerSubmit(e){if(pValidator.validate()){SnLoadingState(!0,"jsAction","providerFormSubmit");var t={};t.id=e.providerId.value||0,t.documentNumber=e.providerDocumentNumber.value,t.socialReason=e.providerSocialReason.value,t.commercialReason=e.providerCommercialReason.value,t.fiscalAddress=e.providerFiscalAddress.value,t.email=e.providerEmail.value,t.telephone=e.providerTelephone.value,t.identityDocumentId=e.providerIdentityDocumentId.value;const o=t.id&&!["","0"].includes(t.id.toString());RequestApi.fetch("/admin/maintenanceProvider/"+(o?"update":"create"),{method:"POST",body:t}).then(e=>{e.success?dynamicResponseSuccess(o,e.message,()=>{o?window.location.href=URL_PATH+"/admin/maintenanceProvider/edit/"+e.result.id:dynamicClearForm(pValidator,"providerForm","providerIdentityDocumentId")},()=>window.location.href=URL_PATH+"/admin/maintenanceProvider"):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction","providerFormSubmit")})}else dynamicFormSubmitInvalidMessage()}function providerShowModalUpdate(e){SnLoadingState(!0,"jsAction"),dynamicClearForm(pValidator,"providerForm","providerDescripcion","providerSerieTableBody"),RequestApi.fetch("/admin/maintenanceProvider/id",{method:"POST",body:{id:e}}).then(e=>{e.success?(document.getElementById("providerId").value=e.result.id,document.getElementById("providerDocumentNumber").value=e.result.document_number,document.getElementById("providerSocialReason").value=e.result.social_reason,document.getElementById("providerCommercialReason").value=e.result.commercial_reason,document.getElementById("providerFiscalAddress").value=e.result.fiscal_address,document.getElementById("providerEmail").value=e.result.email,document.getElementById("providerTelephone").value=e.result.telephone,document.getElementById("providerIdentityDocumentId").value=e.result.identity_document_id,SnModal.open("providerModalForm")):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}function getIdentityDocumentNumber(e,t){t.classList.add("loading"),RequestApi.fetch("/page/queryDocument",{method:"POST",body:{documentNumber:e}}).then(e=>{var t,o;e.success?(t=e.result,document.getElementById("providerDocumentNumber").value=t.document_number,document.getElementById("providerIdentityDocumentId").value=t.document_type_id,document.getElementById("providerFiscalAddress").value=t.full_address,(o=document.getElementById("customerDomicileCondition")).innerHTML=t.domicile_condition,"HABIDO"===t.domicile_condition?o.style.color="var(--green-6)":o.style.color="var(--red-6)",1==t.document_type_id?(document.getElementById("providerSocialReason").value=`${t.full_name} ${t.father_last_name} `+t.mother_last_name,document.getElementById("providerCommercialReason").value=`${t.full_name} ${t.father_last_name} `+t.mother_last_name):3==t.document_type_id&&(document.getElementById("providerSocialReason").value=t.full_name,document.getElementById("providerCommercialReason").value=t.full_name)):SnModal.danger({title:"Algo saliÃ³ mal",content:e.message})}).finally(e=>{t.classList.remove("loading")})}document.addEventListener("DOMContentLoaded",()=>{pValidator=dynamicLoadFormValidate(pValidator,"providerForm");const t=document.getElementById("providerForm"),o=(t.addEventListener("submit",e=>{e.preventDefault(),providerSubmit(t)}),document.getElementById("providerDocumentNumber"));o.addEventListener("keypress",function(e){"Enter"===e.key&&e.preventDefault()}),o.addEventListener("keyup",function(e){"Enter"===e.key&&(e.preventDefault(),getIdentityDocumentNumber(e.target.value,o))}),dynamicViewKeyboardListeners(screenName,appMenuActions)});