function purchaseCancel(e,t,[a]){SnModal.confirm({title:`¿Estás seguro de anular esta venta: ${a}?`,content:"Ingrese el motivo de la anulación",input:!0,okText:"Si",okClassNames:"danger",cancelText:"No",onOk(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processPurchase/cancel",{method:"POST",body:{id:a,message:e}}).then(e=>{e.success?(SnMessage.success({content:e.message}),maintenanceTable.getData()):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}})}function purchaseDetail(e,t,[a]){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/processPurchase/item",{method:"POST",body:{id:a}}).then(e=>{e.success?(document.getElementById("drawPurchaseItemTable").innerHTML=e.view,SnModal.open("purchaseItemModal")):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction")})}document.addEventListener("DOMContentLoaded",()=>{maintenanceTable=new SnTable({elementId:"drawPurchaseTable",entity:"purchase",data:e=>snTableFetchData("/admin/processPurchase/table",e),actions:appMenuActions,selectable:!1,columns:[{title:"Fecha Registro",field:"register_datetime",type:"date",filterable:!0,sortable:!0},{title:"Fecha Emisión",field:"date_of_issue",type:"date",filterable:!0,sortable:!0},{title:"Documento",field:"document_type_id_description",filterable:!0,sortable:!0},{title:"Serie",field:"serie",filterable:!0,sortable:!0},{title:"Number",field:"number",filterable:!0,sortable:!0},{title:"Nº Documento",field:"provider_id_document_number",filterable:!0,sortable:!0},{title:"Razón social",field:"provider_id_social_reason",filterable:!0,sortable:!0},{title:"Gravado",field:"total_taxed",summaryOperator:"sum",type:"number",filterable:!0,sortable:!0,customRender:e=>operability.currency_id_symbol+" "+e.total_taxed},{title:"Igv",field:"total_igv",summaryOperator:"sum",type:"number",filterable:!0,sortable:!0,customRender:e=>operability.currency_id_symbol+" "+e.total_igv},{title:"Total",field:"total",summaryOperator:"sum",type:"number",filterable:!0,sortable:!0,customRender:e=>operability.currency_id_symbol+" "+e.total},{title:"Usuario",field:"user_id_user_name",filterable:!0,sortable:!0},{title:"Estado",field:"purchase_state_id_description",filterable:!0,sortable:!0},...snTableAuditColumnRender()],rowRender:(e,t,a)=>`<tr class="${1==e.purchase_state_id?"canceled":""}" key="${e.id}" data-params="${a}">
            ${t._buildSelectColumn(e)}
            ${t._buildDataRow(e)}
                        </tr>`,filters:[...getUrlFilter(),...0===getUrlFilter().length?[{id:SnUniqueId(),logicalOperator:"AND",prefix:"DONDE",eval:[{id:SnUniqueId(),logicalOperator:"AND",prefix:"DONDE",operator:"se encuentra entre (incluye)",field:"date_of_issue",type:"datetime-local",value1:dayjs().add(-1,"months").format("YYYY-MM-DDTHH:mm"),value2:dayjs().add(1,"days").format("YYYY-MM-DDTHH:mm")}]}]:[]]})});