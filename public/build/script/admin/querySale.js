document.addEventListener("DOMContentLoaded",()=>{maintenanceTable=new SnTable({elementId:"drawQuerySaleTable",entity:"querySale",data:e=>snTableFetchData("/admin/query/saleTable",e),actions:appMenuActions,selectable:!1,columns:[{title:"Fecha Re.",field:"sale_id_register_datetime",filterable:!0,sortable:!0},{title:"Fecha Em.",field:"date_of_issue",filterable:!0,sortable:!0},{title:"Comprobante",field:"document",filterable:!0,sortable:!0,customRender:e=>{var t={},t=(t.filter=JSON.stringify([{id:SnUniqueId(),logicalOperator:"or",prefix:"DONDE",eval:[{id:SnUniqueId(),logicalOperator:"and",prefix:"DONDE",operator:"es",field:"document",type:"text",value1:e.document,value2:""}]}]),new URLSearchParams(t).toString());return`<a href="${URL_PATH}/admin/processSale?${t}" target="_blank">${e.document}</a>`}},{title:"Codigo Pro.",field:"product_id_barcode",filterable:!0,sortable:!0,customRender:e=>{var t;return 1<e.product_id_barcode.length?((t={}).filter=JSON.stringify([{id:SnUniqueId(),logicalOperator:"or",prefix:"DONDE",eval:[{id:SnUniqueId(),logicalOperator:"and",prefix:"DONDE",operator:"es",field:"barcode",type:"text",value1:e.product_id_barcode,value2:""}]}]),t=new URLSearchParams(t).toString(),`<a href="${URL_PATH}/admin/maintenanceProduct?${t}" target="_blank">${e.product_id_barcode}</a>`):e.product_id_barcode}},{title:"Descripcion",field:"description",filterable:!0,sortable:!0},{title:"Categoria",field:"category_id_description",filterable:!0,sortable:!0},{title:"Moneda",field:"currency_id_description",filterable:!0,sortable:!0},{title:"Cantidad",field:"quantity",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.quantity)+" "+e.unit_measure_id_code},{title:"Precio compra",field:"purchase_unit_price",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0},{title:"Valor Uni.",field:"unit_value",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.unit_value)},{title:"Igv",field:"igv",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.igv)},{title:"Precio Uni.",field:"unit_price",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.unit_price)},{title:"Total",field:"total",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.total)},{title:"Utilidad",field:"utility",type:"number",summaryOperator:"sum",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.utility)},{title:"Utilidad %",field:"utility_percentaje",filterable:!0,sortable:!0,customRender:e=>parseFloat(e.utility_percentaje)+"%"},{title:'<i class="fa-solid fa-receipt"></i>',tooltip:"Se requiere receta médica para su venta",field:"recipe",style:"width: 32px;",filterable:!0,sortable:!0,customRender:e=>"1"==e.recipe?'<i class="fa-solid fa-check-double" title="Se requiere receta médica para su venta"></i>':""},{title:'<i class="fas fa-cubes"></i>',tooltip:"Manejo por lotes",style:"width: 32px;",field:"lot",filterable:!0,sortable:!0,customRender:(e,t)=>"1"==e.lot?'<i class="fa-solid fa-check-double" title="Manejo por lotes"></i>':""},{title:"Usuario",field:"user_id_user_name",filterable:!0,sortable:!0}],filters:[...getUrlFilter()]})});