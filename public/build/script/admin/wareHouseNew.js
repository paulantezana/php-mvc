let pValidator;function wareHouseNewList(e,t){window.location.href=URL_PATH+"/admin/"+t}function wareHouseSubmit(e){if(pValidator.validate()){SnLoadingState(!0,"jsAction","wareHouseFormSubmit");var t=document.getElementById("wareHouseId").value||0;let r=new FormData;r.append("id",t),r.append("code",document.getElementById("wareHouseCode").value.replace(/\s/g,"")),r.append("sunatCode",document.getElementById("wareHouseSunatCode").value),r.append("ubigeoCode",document.getElementById("wareHouseUbigeoCode").value),r.append("department",document.getElementById("wareHouseDepartment").value),r.append("province",document.getElementById("wareHouseProvince").value),r.append("district",document.getElementById("wareHouseDistrict").value),r.append("commercialReason",document.getElementById("wareHouseCommercialReason").value),r.append("address",document.getElementById("wareHouseAddress").value),r.append("pdfHeader",document.getElementById("wareHousePdfHeader").value),r.append("pdfFooter",document.getElementById("wareHousePdfFooter").value);var o=document.getElementById("wareHouseLogoSquare"),a=document.getElementById("wareHouseLogoLarge"),o=(0<o?.files?.length&&r.append("logoSquare",o.files[0]),0<a?.files?.length&&r.append("logoLarge",a.files[0]),document.getElementById("wareHouseSerieTableBody"));[...o.children].forEach((e,t)=>{var o=e.dataset.uniqueid,e=e.dataset.isnew,a=document.getElementById("wareHouseSerieDocumentTypeId_"+o).value,n=document.getElementById("wareHouseSerieSerie_"+o).value,d=document.getElementById("wareHouseSeriePdfInvoiceSize_"+o).value,i=document.getElementById("wareHouseSerieContingency_"+o).checked;r.append(`wareHouseSeries[${t}][id]`,"is-false"===e?o:0),r.append(`wareHouseSeries[${t}][documentTypeId]`,a),r.append(`wareHouseSeries[${t}][serie]`,n),r.append(`wareHouseSeries[${t}][pdfInvoiceSize]`,d),r.append(`wareHouseSeries[${t}][contingency]`,i?1:0)});const n=t&&!["","0"].includes(t.toString());RequestApi.fetch("/admin/maintenanceWareHouse/"+(n?"update":"create"),{method:"POST",body:r}).then(e=>{e.success?dynamicResponseSuccess(n,e.message,()=>{n?window.location.href=URL_PATH+"/admin/maintenanceWareHouse/edit/"+e.result.id:dynamicClearForm(pValidator,"wareHouseForm","wareHouseCode","wareHouseSerieTableBody")},()=>window.location.href=URL_PATH+"/admin/maintenanceWareHouse"):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction","wareHouseFormSubmit")})}else dynamicFormSubmitInvalidMessage()}function addwareHouseSerie(e={},t=!0){var o=document.getElementById("wareHouseSerieTableBody");let a="";t&&(e.id=-1*(o.childElementCount+1)),documentTypes.forEach(e=>{a+=`<option value="${e.id}">${e.description}</option>`}),o&&(t=`<tr data-isnew="${t?"is-true":"is-false"}" data-uniqueid="${e.id}" id="wareHouseSerieRow_${e.id}">
                              <td>
                                  <div class="SnForm-item" style="margin-bottom: 0"><select class="SnForm-control" required id="wareHouseSerieDocumentTypeId_${e.id}">${a}</select></div>
                              </td>
                              <td>
                                  <div class="SnForm-item" style="margin-bottom: 0"><input class="SnForm-control" required type="text" maxlength="4" id="wareHouseSerieSerie_${e.id}"></div>
                              </td>
                              <td>
                                  <div class="SnForm-item" style="margin-bottom: 0"><select class="SnForm-control" required id="wareHouseSeriePdfInvoiceSize_${e.id}"><option value="TICKET">TICKET</option><option value="A4">A4</option><option value="A5">A5</option></select></div>
                              </td>
                              <td>
                                  <div class="SnForm-item" style="margin-bottom: 0"><input class="SnForm-control" type="checkbox" id="wareHouseSerieContingency_${e.id}"></div>
                              </td>
                              <td>
                                  <button type="button" class="SnBtn radio icon" onclick="removewareHouseSerieScale('${e.id}')"><i class="fas fa-trash-alt"></i></button>
                              </td>
                          </tr>`,o.insertAdjacentHTML("beforeend",t),document.getElementById("wareHouseSerieDocumentTypeId_"+e.id).value=e.document_type_id,document.getElementById("wareHouseSerieSerie_"+e.id).value=e.serie||"",document.getElementById("wareHouseSeriePdfInvoiceSize_"+e.id).value=e.pdf_invoice_size,document.getElementById("wareHouseSerieContingency_"+e.id).value=1==e.contingency,pValidator=dynamicLoadFormValidate(pValidator,"wareHouseForm"))}function removewareHouseSerieScale(e){let t=document.getElementById("wareHouseSerieRow_"+e);t&&("is-true"==t.dataset.isnew?t.remove():SnModal.confirm({title:"¿Estás seguro de eliminar el registro?",content:"",okText:"Si",okClassNames:"danger",cancelText:"No",onOk(){SnLoadingState(!0,"jsAction","wareHouseFormSubmit"),RequestApi.fetch("/admin/maintenanceWareHouse/deleteWareHouseSerie",{method:"POST",body:{wareHouseSerieId:e}}).then(e=>{e.success?(SnMessage.success({content:e.message}),t.remove()):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsAction","wareHouseFormSubmit")})}}))}document.addEventListener("DOMContentLoaded",()=>{pValidator=dynamicLoadFormValidate(pValidator,"wareHouseForm");const t=document.getElementById("wareHouseForm");t.addEventListener("submit",e=>{e.preventDefault(),wareHouseSubmit(t)}),wareHouseSeries&&wareHouseSeries.forEach(e=>addwareHouseSerie(e,!1)),dynamicViewKeyboardListeners(screenName,appMenuActions)});