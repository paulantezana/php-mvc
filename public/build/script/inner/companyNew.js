let companyStateModalType="create",pValidator;function companySubmit(){if(pValidator.validate()){let e={};e.id=document.getElementById("companyId").value||0,e.shardId=document.getElementById("companyShardId")?.value||0,e.documentNumber=document.getElementById("companyDocumentNumber").value,e.socialReason=document.getElementById("companySocialReason").value,e.commercialReason=document.getElementById("companyCommercialReason").value,e.fiscalAddress=document.getElementById("companyFiscalAddress").value,e.email=document.getElementById("companyEmail").value,e.phone=document.getElementById("companyPhone").value,e.telephone=document.getElementById("companyTelephone").value,e.urlWeb=document.getElementById("companyUrlWeb").value,e.representative=document.getElementById("companyRepresentative").value,e.appPlanId=document.getElementById("companyAppPlanId").value,e.appPaymentIntervalId=document.getElementById("companyAppPaymentIntervalId").value,e.billingProvider=document.getElementById("companyBillingProvider").value;const n=e.id&&!["","0"].includes(e.id.toString());n||(e.userPassword=document.getElementById("userPassword").value,e.userPasswordConfirm=document.getElementById("userPasswordConfirm").value),SnModal.confirm({title:"¿Estás seguro de guardar esta empresa?",okText:"Si",okClassNames:"warning",cancelText:"No",onOk(){SnLoadingState(!0,"jsCompanyAction"),RequestApi.fetch("/inner/appCompany/"+(n?"update":"create"),{method:"POST",body:e}).then(e=>{e.success?dynamicResponseSuccess(n,e.message,()=>{n?window.location.href=URL_PATH+"/inner/appCompany/edit/"+e.result.id:dynamicClearForm(pValidator,"companyForm","companyDocumentNumber")},()=>window.location.href=URL_PATH+"/inner/appCompany"):dynamicResponseErrorModalMessage(e)}).finally(e=>{SnLoadingState(!1,"jsCompanyAction")})}})}else dynamicFormSubmitInvalidMessage()}function searchDocumentChangeState(e){var n=document.getElementById("companySearchDocument");n&&(e?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"))}function companySearchDocument(){var e=document.getElementById("companyDocumentNumber").value;searchDocumentChangeState(!0),RequestApi.fetch("/page/queryDocument",{method:"POST",body:{documentNumber:e,documentTypeId:3}}).then(e=>{e.success?(document.getElementById("companySocialReason").value=e.result.full_name,document.getElementById("companyFiscalAddress").value=e.result.full_address):SnModal.danger({title:"Algo salió mal",content:e.message})}).finally(e=>{searchDocumentChangeState(!1)})}document.addEventListener("DOMContentLoaded",()=>{pValidator=new Pristine(document.getElementById("companyForm"));const n=document.getElementById("companyForm");n.addEventListener("submit",e=>{e.preventDefault(),companySubmit(n)})});